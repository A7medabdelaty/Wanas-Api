# ?? ???? ??????? ?? OpenAI ??? Google Gemini - ???? ????

## ? ?? ?? ????

?? ??????? **OpenAI Embeddings** ?? **Google Gemini Embeddings** ?????? ???:
- ?? **API ????? ??????** - ???? ????!
- ? **????** - 0.8 ????? ????? ?? 1.2 ?????
- ?? **??? ??????** - ??? ???? ?? ?????
- ?? **?? ???? ???????** - 60 ???/????? ????? ?? 3

---

## ?? ????? ??????? (5 ?????)

### **1. ???? ??? Gemini API Key**
```
???? ???: https://aistudio.google.com/app/apikey
???? "Get API Key"
???? ??????? (???? ?? AIza...)
```

### **2. ???? ??? `.env`**
```env
CLOUDINARY_URL=cloudinary://...
GEMINI_API_KEY=AIzaSyD...your-key-here
```

**???? ?????:** `OPENAI_API_KEY=...`

### **3. ??? ????? ???????**
```sh
dotnet run
```

### **4. ??? ????? ???? ?????**
```
POST https://localhost:7279/api/admin/chroma/reindex-all
Authorization: Bearer {admin-jwt}
```

**? ?????! ?????? ???? ???? ???? ??????!**

---

## ?? ?????? ?? ??????

### **?? Logs ??? ???????:**
```
? [INF] Gemini Embedding Service initialized
? [INF] Successfully generated 768 dimensional embedding
? [INF] ChromaDB returned X listing IDs
? [INF] Boosted X listings with semantic match
```

### **??? ?????? ????????:**
```
GET https://localhost:7279/api/Matching/user/{user-id}
```
**??? ?? ???? ??? ????? ?? ????? AI** ?

---

## ?? ??? ????

### **??? ????? ???????!**
- Embeddings ??????? ?? OpenAI (1536 ????) ??? ??????? ?? Gemini (768 ????)
- ?????? endpoint ??? reindex-all ??? ???????

### **?? ???? ?????:**
```
ChromaDB error: Expected 1536 dimensions, got 768
```

**????:**
```sh
# ???? ?????? ChromaDB
docker volume rm chroma_data
docker restart {chroma-container}

# ??? ????? ???????
dotnet run

# ????? ??????? ????????
```

---

## ?? ????????

| **???????** | **OpenAI** | **Gemini** |
|-------------|-----------|------------|
| ??????? | $0.0001/??? | **?????** ? |
| ?????? | 1.2 ????? | **0.8 ?????** ? |
| ???? ?????? | 3 ?????/????? | **60 ???/?????** ? |
| ?????? | ?????? | ?????? ? |
| ??????? | 1536 | 768 |
| ????? ????? | ??? ? | ?? ? |

---

## ?? ????????? ???????

### **1. ??? ????: `GeminiEmbeddingService.cs`**
```csharp
// ??: Wanas.Application\Services\GeminiEmbeddingService.cs
// ??????: Google text-embedding-004 model
// ????: 768 ???? ????? ?? 1536
```

### **2. ????? `DependencyInjection.cs`**
```csharp
// ??????:
services.AddHttpClient<IEmbeddingService, OpenAIEmbeddingService>();

// ??????:
services.AddHttpClient<IEmbeddingService, GeminiEmbeddingService>();
```

### **3. ????? ??????**
```
// ??????:
OPENAI_API_KEY=sk-proj-...

// ??????:
GEMINI_API_KEY=AIzaSyD...
```

---

## ?? ?? ??????? ???????

### **???: API Key ??? ?????**
```
InvalidOperationException: Gemini API Key is not configured
```
**????:** ??? `GEMINI_API_KEY` ?? ??? `.env`

---

### **???: 400 Bad Request**
**???????:**
1. API Key ????
2. Gemini API ??? ????? ?? ??????

**????:**
```
???? ???: https://console.cloud.google.com/apis/library/generativelanguage.googleapis.com
???? "Enable"
```

---

### **???: 429 Too Many Requests**
**???? ???????:**
- 60 ???/?????
- 1,500 ???/???

**????:**
????? ????? ?????? ?? ??? ????? ??????? ?? ???????

---

## ?? ????? ????????

### **??? (OpenAI)**
- 1,000 ???/??? = **$3/???**
- 10,000 ???/??? = **$30/???**

### **???? (Gemini)**
- ??? ????? (??? ???? ??????) = **?????** ??
- **????? 100%** ??

---

## ? ????? ??????

- [ ] ???? ??? Gemini API Key
- [ ] ????? ??? `.env`
- [ ] ???? `OPENAI_API_KEY`
- [ ] ???? ?????? ChromaDB ???????
- [ ] ???? ????? ???????
- [ ] ????? ?? Logs: "Gemini Embedding Service initialized"
- [ ] ???? ????? ???? ?????: `POST /reindex-all`
- [ ] ?????? ????????: `GET /api/Matching/user/{id}`
- [ ] ????? ??: "768 dimensional embedding" ?? Logs

---

## ?? ???????

**????? ????:**
- ? ?????? Google Gemini ???????
- ? ???? ?? OpenAI
- ? ???? ?????? ???????
- ? ??? ???? ????????
- ? ???? ???????

**?? ?????! ????? ?????? OpenAI ????? ??? ???? ????!**

---

## ?? ????? ?????

- **???? ??? API Key:** https://aistudio.google.com/app/apikey
- **??????? ??????:** https://ai.google.dev/api/embeddings
- **?????:** https://ai.google.dev/docs
